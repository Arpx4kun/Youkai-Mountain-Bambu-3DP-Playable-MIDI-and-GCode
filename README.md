# Youkai-Mountain-Bambu-3DP-Playable-MIDI-and-GCode
利用Bambu Lab A1 mini播放Midi - 妖怪之山 MIDI & G-code 项目


这里是 arpx4kun。

这个仓库包含了我视频项目 **《妖怪之山 ～ Mysterious Mountain (A1 mini Cover)》** 中所用到的核心文件。简单说，就是如何让你的拓竹A1 mini 3D打印机（理论上其他基于打印机也可以尝试）播放出相对清晰、均衡的音乐。

两年前我发现这个小功能时觉得特别有趣，但很多打印机的音乐演示听起来都有些“单薄”或“嘈杂”。经过一番折腾，我发现关键在于**把原始MIDI精简到表现力足够的三个单音音轨的版本**还有**如何为三个不同的步进电机分配合适的音轨**。这个仓库就是我折腾出来的、个人认为效果最好的版本，供你参考、把玩和改进。

**核心发现**
1. **物理限制**：一个电机只能同时以一个频率振动，也就是同时只能发出一个音。三个电机意味着一台3D打印机只能同时播放三个音，分别放在三个音轨里面，这对输入MIDI文件的要求就是：每一个MIDI音轨同时只能有一个音出现，否则会被忽略。
1. **乐曲资源修改**：大多数从网上下载或者自己谱曲的MIDI文件由于追求表现力，音轨数量往往会远远超出这个数，也会出现单个音轨有同时播放多个音的情况这些，都需要精简掉。

1.  **音域限制**：每个步进电机有其发声的“舒适区”，音调太高或太低都会变成难听的噪音或根本无声。需要手动为MIDI设置合理的音高上限和下限。
2.  **电机特性差异**：A1 mini的X、Y、Z轴电机，由于负载和结构不同，振动特性截然不同。有的适合表现清脆的高音，有的则更适合沉稳的中低音。
3.  **排列组合**：将高中低三个音轨分配给XYZ三个电机，一共有6种（3P3）分配方式。不同的分配会极大影响最终听感的平衡度与清晰度。

本仓库提供的文件，就是我认为的“最佳搭配方案”。

**文件说明**

*   `妖怪之山3trksplitted.mid`
    *   这是**核心的MIDI文件**。我在原版MIDI基础上，手动精简、调整，最终只保留三个单音音轨，并限制了它们的音高范围，以适配电机的发声能力。
*   `2ygzs_bcm(currentSoTA).gcode`
    *   这是通过**拓竹官方MIDI项目工具**（见下文链接）生成的G-code文件。你只需要将这个文件用Bambu Studio发送给A1 mini，它就可以开始“演奏”了。文件中已经包含了本视频使用的音轨-电机分配逻辑。
*   另外附赠一些其他乐曲的开发中文件。那些妖怪之山的bcm/cbm/mcb之类调节的是电机分配顺序（在官方项目上可以选择如何分配）。

**如何使用**

1.  **直接播放**：如果你想直接听一下效果，只需将 `MysteriousMountain_A1mini_Print.gcode` 文件通过Bambu Studio发送给你的A1 mini即可。**请注意，打印头会移动，请确保平台清洁、无遮挡，并注意安全。**
2.  **研究与修改**：
    *   你可以用MIDI编辑软件（如MuseScore, FL Studio等）打开 `.mid` 文件，研究或修改音轨。
    *   然后，访问拓竹官方的MIDI项目页面，将你的MIDI导入，重新选择电机分配并生成属于你自己的G-code。电机分配方法是这样的：进入项目并且导入更改完的MIDI之后，页面左侧会出现三个音轨。每个音轨分别可以选择chord，base和main theme三个选项，这三个选项分别对应C/B/M，然后三个音轨的分配就是我给出的CBM的顺序。可以尝试自己调节或者尝试得出哪个电机是哪个轨道。

**致谢与工具**

*   本项目的实现基于 **Bambu Lab官方发布的MIDI播放项目**
    *   **官方项目地址**：《我只想要A1 mini 为我唱首小曲》  https://wiki.bambulab.com/zh/a1-mini/midi
*   原曲《妖怪之山 ～ Mysterious Mountain》作曲：ZUN (Team Shanghai Alice)。


**开源协议**

本项目相关文件基于 LICENSE 开源。你可以自由地使用、修改和分发，但请注意原曲的版权归属。

希望这些文件能帮你开启3D打印机音乐创作的大门，或者至少给你带来一点有趣的灵感。玩得开心！

arpx4kun
2025.12.29 (项目原型完成于 2023.11)


**其他说明**

```
妖怪之山 ～ Mysterious Mountain
Cover： 拓竹A1 mini
（可能是目前全网最均衡清晰的版本？）

其实是两年前刚买这台打印机不久的时候
发现的奇妙小功能...

想拿3D打印机整点音乐相关的活儿

于是盯上了负责3个轴运动的步进电机。

理论上让步进电机高频振动就可以发出声音

一个电机同时振动只能发出一种音调 
所以同一时刻一个电机能播放一个音 

所以只要把原始的音乐MIDI文件转成
只有三个单音音轨的形式
就可以完美在3D打印机上播放 

刚好拓竹官方也推出了他们的这个项目
（地址在简介）

理论存在，实践开始！

第一个曲目就拿妖怪之山开刀
把别人的MIDI文件摘取下来
自己手动调成只剩三个单音音轨 

然后导入拓竹的项目框架
给每条音轨选择电机然后导出就好了 

不过经过我的反复试验
电机能发出的好听的
最低音和最高音范围是有限制的 

不同轴的电机的振动特性也会有区别
导致适合表现不同的音域 

事实上它的声音会受其他的干扰 
比如说耗材的振动还有X轴上的刀之类

所以在限制最高最低音的同时
给三个音轨来分配三个轴
一共有3P3等于6种情况  

现在播出来的是
我试出来最好听的排布

有其他人在3D打印机放音乐
上面的实践成果表现得有点不均衡 

高音低音缺失或者噪音太大之类的问题
原因可能就是这个 

所以这个视频可能是
这类打印机音乐的全网比较清晰的版本 

我把相关文件都放在了简介
供大家自取研究

让3D打印机产出更美妙的旋律 

享受完整版的《妖怪之山》吧！

arpx4kun
2025.12.2（视频录制于2023.11）
```
